<!DOCTYPE html>
<html lang="mk">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <title>Lenovo –ö–≤–∏–∑ ‚Äî –û—Ç–∫—Ä–∏—ò –≥–æ –∏–¥–µ–∞–ª–Ω–∏–æ—Ç Lenovo</title>

    <!-- Google Tag Manager -->
    <script>
    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-WC6S5RZV');
    </script>
    <!-- End Google Tag Manager -->

    <!-- Meta Pixel Code -->
    <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '4558619690906145');
    fbq('track', 'PageView');
    </script>
    <!-- End Meta Pixel Code -->
    
    <!-- Fonts: Inter (UI) & Space Grotesk (Headers) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Space+Grotesk:wght@500;700&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --lenovo-red: #E2231A;
            --lenovo-red-glow: rgba(226, 35, 26, 0.5);
            --bg-dark: #09090b;
            --glass-surface: rgba(30, 30, 35, 0.6);
            --glass-border: rgba(255, 255, 255, 0.08);
            --glass-highlight: rgba(255, 255, 255, 0.05);
            --text-main: #ffffff;
            --text-muted: #9ca3af;
            --radius: 24px;
            --font-ui: 'Inter', sans-serif;
            --font-head: 'Space Grotesk', sans-serif;
        }

        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            margin: 0;
            padding: 0;
            font-family: var(--font-ui);
            background-color: var(--bg-dark);
            color: var(--text-main);
            overflow-x: hidden;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* BG mesh from v1 */
        .bg-gradient-mesh {
            position: fixed;
            top: 0; left: 0; width: 100vw; height: 100vh;
            z-index: -1;
            overflow: hidden;
            background: #050505;
        }
        .blob {
            position: absolute;
            filter: blur(90px);
            opacity: 0.35;
            animation: float 25s infinite ease-in-out;
            border-radius: 50%;
        }
        .blob-1 { top: -20%; left: -20%; width: 60vw; height: 60vw; background: var(--lenovo-red); animation-delay: 0s; }
        .blob-2 { bottom: -20%; right: -20%; width: 70vw; height: 70vw; background: #1f2937; animation-delay: -5s; }
        .blob-3 { top: 10%; right: 10%; width: 40vw; height: 40vw; background: #111827; animation-delay: -10s; }

        @keyframes float {
            0% { transform: translate3d(0,0,0) scale(1); }
            50% { transform: translate3d(20px, -30px, 0) scale(1.05); }
            100% { transform: translate3d(-10px, 20px, 0) scale(1); }
        }

        .logo-bar {
            padding: 24px;
            display: flex;
            justify-content: center;
            position: relative;
            z-index: 10;
        }
        .logo-bar img {
            height: 24px;
            filter: brightness(0) invert(1);
            opacity: 0.8;
        }

        .container {
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
            padding: 0 20px 40px 20px;
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            position: relative;
            z-index: 10;
        }

        /* Glass card style */
        .glass-card {
            background: var(--glass-surface);
            backdrop-filter: blur(24px);
            -webkit-backdrop-filter: blur(24px);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius);
            padding: 32px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.05);
            position: relative;
            overflow: hidden;
            transition: transform 0.4s ease;
        }

        .heading-font {
            font-family: var(--font-head);
            font-weight: 700;
            letter-spacing: -0.02em;
        }

        .text-red {
            color: var(--lenovo-red);
            text-shadow: 0 0 10px var(--lenovo-red-glow);
        }
        .text-muted {
            color: var(--text-muted);
        }

        /* Screens */
        .screen {
            padding: 1.5rem 0;
            flex-grow: 1;
            display: none;
            flex-direction: column;
            animation: fadeIn 0.6s cubic-bezier(0.22, 1, 0.36, 1);
        }
        .screen.active { display: flex; }
        .screen-center { align-items: center; justify-content: center; text-align: center; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px) scale(0.98); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        /* Buttons */
        .btn-primary {
            background: var(--lenovo-red);
            color: white;
            border: none;
            padding: 18px 32px;
            font-size: 1.1rem;
            font-weight: 700;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            width: 100%;
            display: inline-flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            font-family: var(--font-head);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 0 20px rgba(226, 35, 26, 0.4);
        }
        .btn-primary::after {
            content: '';
            position: absolute;
            top: 0; left: -100%;
            width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: 0.5s;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 30px rgba(226, 35, 26, 0.6);
        }
        .btn-primary:hover::after { left: 100%; }
        .btn-primary:disabled { filter: grayscale(1); cursor: not-allowed; }

        .option-card {
            display: flex;
            align-items: center;
            padding: 18px;
            margin-bottom: 12px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .option-card:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.3);
            transform: translateX(5px);
        }
        .option-card.selected {
            background: rgba(226, 35, 26, 0.15);
            border-color: var(--lenovo-red);
        }

        .radio-circle {
            width: 22px; height: 22px;
            border: 2px solid rgba(255,255,255,0.4);
            border-radius: 50%;
            margin-right: 16px;
            position: relative;
            transition: all 0.2s;
        }
        .option-card.selected .radio-circle {
            border-color: var(--lenovo-red);
            box-shadow: 0 0 10px rgba(226, 35, 26, 0.5);
        }
        .option-card.selected .radio-circle::after {
            content: '';
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 10px; height: 10px;
            background: var(--lenovo-red);
            border-radius: 50%;
        }
        .option-text { font-weight: 500; font-size: 1rem; }

        /* Progress */
        .progress-container {
            padding: 0 0 16px 0;
            display: none;
        }
        .progress-info {
            display: flex; justify-content: space-between;
            font-size: 0.75rem; text-transform: uppercase;
            letter-spacing: 1px; color: var(--text-muted);
            margin-bottom: 10px;
        }
        .progress-track {
            height: 4px; background: rgba(255,255,255,0.1);
            border-radius: 2px; overflow: hidden;
        }
        .progress-fill {
            height: 100%; background: var(--lenovo-red);
            width: 0%; transition: width 0.4s ease;
            box-shadow: 0 0 10px var(--lenovo-red);
        }

        /* Loading */
        .spinner-container { position: relative; width: 100px; height: 100px; margin: 0 auto 30px; }
        .spinner-ring {
            width: 100%; height: 100%;
            border: 3px solid rgba(255,255,255,0.1);
            border-top-color: var(--lenovo-red);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        .spinner-icon {
            position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            font-size: 2rem; color: rgba(255,255,255,0.2);
        }
        @keyframes spin { 100% { transform: rotate(360deg); } }

        /* Blur / lock */
        .blur-wrapper { position: relative; margin-bottom: 2rem; }
        .blur-target {
            filter: blur(15px);
            opacity: 0.5;
            transition: all 0.8s ease;
            mask-image: linear-gradient(to bottom, black 50%, transparent 100%);
            -webkit-mask-image: linear-gradient(to bottom, black 50%, transparent 100%);
        }
        .blur-target.revealed { filter: blur(0); opacity: 1; }
        
        .lock-container {
            position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10;
        }
        .lock-icon {
            font-size: 3rem; color: var(--lenovo-red);
            filter: drop-shadow(0 0 15px rgba(226,35,26,0.6));
            animation: lockDrop 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        }
        @keyframes lockDrop {
            0% { transform: translateY(-100px) scale(0); opacity: 0; }
            100% { transform: translateY(0) scale(1); opacity: 1; }
        }

        /* Form */
        .form-input {
            width: 100%;
            padding: 16px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            color: white;
            font-family: var(--font-ui);
            font-size: 1rem;
            transition: 0.3s;
            margin-top: 6px;
        }
        .form-input:focus {
            outline: none;
            border-color: var(--lenovo-red);
            box-shadow: 0 0 15px rgba(226, 35, 26, 0.2);
            background: rgba(0, 0, 0, 0.5);
        }
        .form-label { font-size: 0.9rem; color: var(--text-muted); margin-left: 4px; }

        /* No text selection (for blurred result) */
        .no-select {
            user-select: none;
            -webkit-user-select: none;
            -ms-user-select: none;
            pointer-events: none;
        }

        /* Back button */
        .back-btn {
            background: transparent;
            border: none;
            color: var(--text-muted);
            font-size: 0.85rem;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            cursor: pointer;
            padding: 0;
            margin-bottom: 12px;
        }
        .back-btn i {
            font-size: 0.8rem;
        }
        .back-btn.disabled {
            opacity: 0.3;
            pointer-events: none;
        }

        /* Animated pill above headline (welcome) */
        .hero-pill {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 6px 12px;
            border-radius: 999px;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-bottom: 12px;
            animation: pillFloat 3s ease-in-out infinite;
        }
        .hero-dot {
            width: 8px; height: 8px;
            border-radius: 50%;
            background: var(--lenovo-red);
            box-shadow: 0 0 10px var(--lenovo-red);
            animation: pulseDot 1.8s infinite;
        }
        @keyframes pillFloat {
            0% { transform: translateY(0); }
            50% { transform: translateY(-4px); }
            100% { transform: translateY(0); }
        }
        @keyframes pulseDot {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.4); opacity: 0.4; }
            100% { transform: scale(1); opacity: 1; }
        }

        /* ================================
           START CARD CORE
           ================================ */
        .fade-in {
            animation: fadeInStart 0.8s ease forwards;
        }
        @keyframes fadeInStart {
            from { opacity: 0; transform: translateY(20px) scale(0.98); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }
        #screen-welcome.startCard {
            position: relative;
        }
        .core-top {
            position: relative;
            width: 100%;
            height: 140px;
            display: flex;
            align-items: center;
            justify-content: center;
            pointer-events: none;
            z-index: 0;
            margin-bottom: 14px;
        }
        .core-ring {
            position: absolute;
            border-radius: 50%;
            border: 1px solid rgba(226, 35, 26, 0.35);
            animation: pulseRing 4s infinite ease-in-out;
        }
        .core-ring.r1 {
            width: 220px;
            height: 220px;
            animation-delay: 0s;
        }
        .core-ring.r2 {
            width: 300px;
            height: 300px;
            animation-delay: 1.5s;
        }
        .core-center {
            width: 90px;
            height: 90px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(226,35,26,0.9), rgba(226,35,26,0.2));
            box-shadow: 0 0 60px rgba(226,35,26,0.6);
            animation: pulseCore 2.5s infinite ease-in-out;
        }
        @keyframes pulseRing {
            0% { transform: scale(0.9); opacity: 0.2; }
            50% { transform: scale(1.05); opacity: 0.5; }
            100% { transform: scale(0.9); opacity: 0.2; }
        }
        @keyframes pulseCore {
            0% { transform: scale(1); opacity: 0.9; }
            50% { transform: scale(1.15); opacity: 1; }
            100% { transform: scale(1); opacity: 0.9; }
        }
        .welcome-content {
            position: relative;
            z-index: 1;
        }
        /* ================================ */

        @media (max-width: 640px) {
            .glass-card {
                padding: 24px;
            }
            .core-ring.r1 { width: 200px; height: 200px; }
            .core-ring.r2 { width: 270px; height: 270px; }
        }
    </style>
</head>
<body>

<noscript>
  <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WC6S5RZV"
          height="0" width="0" style="display:none;visibility:hidden"></iframe>
</noscript>

<noscript>
  <img height="1" width="1" style="display:none"
       src="https://www.facebook.com/tr?id=4558619690906145&ev=PageView&noscript=1" />
</noscript>

<div class="bg-gradient-mesh">
  <div class="blob blob-1"></div>
  <div class="blob blob-2"></div>
  <div class="blob blob-3"></div>
</div>

<div class="logo-bar">
  <img src="https://upload.wikimedia.org/wikipedia/commons/b/b8/Lenovo_logo_2015.svg" alt="Lenovo">
</div>

<main class="container">

  <div id="quiz-wrapper" class="glass-card">
    
    <!-- HEADER / PROGRESS -->
    <div id="progress-header" class="progress-container">
        <div class="progress-info">
            <span id="progress-text">–ü—Ä–∞—à–∞—ö–µ 1/7</span>
            <span id="progress-percent">14%</span>
        </div>
        <div class="progress-track">
            <div id="progress-bar" class="progress-fill"></div>
        </div>
    </div>

    <!-- SCREEN 0: WELCOME -->
    <div id="screen-welcome" class="screen screen-center active startCard fade-in">
        <div class="welcome-content">

            <div class="core-top">
                <div class="core-ring r1"></div>
                <div class="core-ring r2"></div>
                <div class="core-center"></div>
            </div>
            
            <h1 class="heading-font" style="font-size: 2.5rem; margin-bottom: 1rem; text-align:center;">
                –û—Ç–∫—Ä–∏—ò –ö–æ—ò <span class="text-red">Lenovo</span><br>–ï –ó–∞ –¢–µ–±–µ
            </h1>
            
            <p class="text-muted" style="font-size: 1.05rem; line-height: 1.6; margin-bottom: 2.5rem; max-width: 90%; text-align:center; margin-left:auto; margin-right:auto;">
                –û–¥–≥–æ–≤–æ—Ä–∏ –Ω–∞ –±—Ä–∑–∏ –ø—Ä–∞—à–∞—ö–∞ –∑–∞ 30 —Å–µ–∫—É–Ω–¥–∏ –∏ –¥–æ–∑–Ω–∞—ò –∫–æ—ò –º–æ–¥–µ–ª –µ —Å–æ–≤—Ä—à–µ–Ω –∑–∞ —Ç–≤–æ—ò–∞—Ç–∞ –∏–≥—Ä–∞ –∏–ª–∏ —Ä–∞–±–æ—Ç–∞.
            </p>

            <button onclick="startQuiz()" class="btn-primary">
                –ó–∞–ø–æ—á–Ω–∏ –ö–≤–∏–∑ <i class="fas fa-gamepad"></i>
            </button>

            <div style="margin-top: 2rem; display: flex; gap: 20px; font-size: 0.85rem; color: var(--text-muted); justify-content:center;">
                <span><i class="fas fa-check-circle text-red"></i> –ë–µ—Å–ø–ª–∞—Ç–Ω–æ</span>
                <span><i class="fas fa-bolt text-red"></i> 30 —Å–µ–∫—É–Ω–¥–∏</span>
            </div>

        </div>
    </div>

    <!-- SCREEN 1: QUESTIONS -->
    <div id="screen-questions" class="screen">
        <!-- Back button row -->
        <button id="back-btn" class="back-btn" onclick="goBack()">
            <i class="fas fa-chevron-left"></i> –ù–∞–∑–∞–¥
        </button>

        <div style="flex-grow: 1; display: flex; flex-direction: column; justify-content: center;">
            <h2 id="q-text" class="heading-font" style="font-size: 1.8rem; margin-bottom: 2rem;"></h2>
            <div id="a-container"></div>
        </div>
    </div>

    <!-- SCREEN 2: LOADING -->
    <div id="screen-loading" class="screen screen-center">
        <div class="spinner-container">
            <div class="spinner-ring"></div>
            <i class="fas fa-microchip spinner-icon"></i>
        </div>
        <h3 id="loading-text" style="font-size: 1.1rem; margin-bottom: 1rem;">
            –ì–∏ —Å–ø–æ—Ä–µ–¥—É–≤–∞–º–µ —Ç–≤–æ–∏—Ç–µ –æ–¥–≥–æ–≤–æ—Ä–∏‚Ä¶
        </h3>
        <div style="width: 200px; height: 4px; background: rgba(255,255,255,0.1); border-radius: 2px;">
            <div id="loading-bar" style="height: 100%; background: var(--lenovo-red); width: 0%; transition: width 0.3s;"></div>
        </div>
    </div>

    <!-- SCREEN 3: LOCKED / PARTIAL REVEAL -->
    <div id="screen-locked" class="screen screen-center">
        <div class="blur-wrapper">
            <img src="https://images.unsplash.com/photo-1603302576837-37561b2e2302?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" 
                 class="blur-target no-select" style="width: 280px;" alt="Laptop">
            
            <div class="lock-container">
                <i class="fas fa-lock lock-icon"></i>
            </div>
        </div>

        <div style="animation: fadeIn 0.5s 0.2s forwards; opacity: 0;">
            <h2 class="heading-font" style="font-size: 1.8rem; margin-bottom: 0.5rem; text-align:center;">–ì–æ –Ω–∞—ò–¥–æ–≤–º–µ —Ç–≤–æ—ò–æ—Ç –∏–¥–µ–∞–ª–µ–Ω Lenovo.</h2>
            <p class="text-muted" style="text-align:center;">–û–ø—Ç–∏–º–∞–ª–µ–Ω —Å–ø–æ—Ä–µ–¥ —Ç–≤–æ–∏—Ç–µ –æ–¥–≥–æ–≤–æ—Ä–∏.</p>
            <p class="text-red" style="font-weight: 700; font-size: 1.2rem; margin-top: 1.5rem; letter-spacing: 1px; text-align:center;">–ù–û –ü–†–í–û‚Ä¶ –û–¢–ö–õ–£–ß–ò –ì–û.</p>
        </div>

        <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 12px; margin: 25px 0; width: 100%; border: 1px dashed rgba(255,255,255,0.2);">
            <div style="font-size: 0.7rem; text-transform: uppercase; color: var(--text-muted); margin-bottom: 5px;">–°–¢–ê–¢–£–° –ù–ê –ü–†–ï–ü–û–†–ê–ö–ê</div>
            <!-- cannot select/copy this text -->
            <div class="no-select" style="filter: blur(5px); font-family: var(--font-head); font-size: 1.1rem;">
                Lenovo Legion Pro 7i Gen 8
            </div>
        </div>

        <button onclick="goToForm()" class="btn-primary" style="background: white; color: black; box-shadow: none;">
            –û—Ç–∫–ª—É—á–∏ –†–µ–∑—É–ª—Ç–∞—Ç <i class="fas fa-unlock-alt"></i>
        </button>
    </div>

    <!-- SCREEN 4: FORM / UNLOCK GATE -->
    <div id="screen-form" class="screen">
        <div style="display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 1rem; margin-bottom: 1.5rem;">
            <div>
                <h3 class="heading-font" style="margin: 0; font-size: 1.2rem;">–¢–≤–æ—ò–æ—Ç —É—Ä–µ–¥ –µ –ø–æ–¥–≥–æ—Ç–≤–µ–Ω</h3>
                <span class="text-red" style="font-size: 0.75rem; font-weight: 700; text-transform: uppercase;">–ß–µ–∫–æ—Ä 8 –æ–¥ 8 ‚Äî –û—Ç–∫–ª—É—á–∏ üëá</span>
            </div>
            <div style="width: 50px; height: 35px; background: rgba(255,255,255,0.1); border-radius: 4px; overflow: hidden;">
                <img src="https://images.unsplash.com/photo-1603302576837-37561b2e2302?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&q=80" style="width: 100%; height: 100%; object-fit: cover; filter: blur(3px);">
            </div>
        </div>

        <form id="lead-form" onsubmit="submitForm(event)" style="flex-grow: 1; display: flex; flex-direction: column; gap: 20px;">
            <div>
                <label class="form-label">–ò–º–µ –∏ –ü—Ä–µ–∑–∏–º–µ</label>
                <input type="text" id="fullname" required class="form-input" placeholder="–í–Ω–µ—Å–∏ –∏–º–µ...">
            </div>
            
            <div>
                <label class="form-label">Email –ê–¥—Ä–µ—Å–∞</label>
                <input type="email" id="email" required class="form-input" placeholder="–í–Ω–µ—Å–∏ email...">
            </div>

            <div>
                <label class="form-label">–¢–µ–ª–µ—Ñ–æ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª–Ω–æ)</label>
                <input type="tel" id="phone" class="form-input" placeholder="07x xxx xxx">
            </div>

            <div style="display: flex; align-items: flex-start; margin-top: 5px;">
                <input id="consent" type="checkbox" required style="margin-top: 5px; accent-color: var(--lenovo-red);">
                <label for="consent" style="font-size: 0.8rem; color: var(--text-muted); margin-left: 10px; line-height: 1.4;">
                    –°–µ —Å–æ–≥–ª–∞—Å—É–≤–∞–º –¥–∞ –±–∏–¥–∞–º –∫–æ–Ω—Ç–∞–∫—Ç–∏—Ä–∞–Ω –≤–æ –≤—Ä—Å–∫–∞ —Å–æ –º–æ—ò–∞—Ç–∞ Lenovo –ø—Ä–µ–ø–æ—Ä–∞–∫–∞, —Ü–µ–Ω–∏ –∏ –ø–æ–Ω—É–¥–∏.
                </label>
            </div>

            <div style="flex-grow: 1;"></div>

            <button type="submit" id="submit-btn" class="btn-primary">
                –û—Ç–∫–ª—É—á–∏ —ò–∞ –ø—Ä–µ–ø–æ—Ä–∞–∫–∞—Ç–∞ <i class="fas fa-lock-open"></i>
            </button>
        </form>
    </div>

  </div>
</main>

<script>
    const GOOGLE_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbx4NG7bgInqluGB2XoymZzVIoyuLs0s8FEfWBpQv0UNHXT7agrums20jfQGk_jdPo9Q/exec";
    
    const questions = [
        {
            id: "Q1",
            text: "–ó–∞ —à—Ç–æ –Ω–∞—ò–º–Ω–æ–≥—É —ú–µ –≥–æ –∫–æ—Ä–∏—Å—Ç–∏—à –ª–∞–ø—Ç–æ–ø–æ—Ç?",
            options: [
                { text: "–í–∏–¥–µ–æ –∏–≥—Ä–∏", value: "A" },
                { text: "–†–∞–±–æ—Ç–∞ –≤–æ –∫–∞–Ω—Ü–µ–ª–∞—Ä–∏—ò–∞ –∏–ª–∏ –æ–¥ –¥–æ–º–∞", value: "B" }
            ]
        },
        {
            id: "Q2",
            text: "–®—Ç–æ —Ç–∏ –µ –Ω–∞—ò–≤–∞–∂–Ω–æ?",
            options: [
                { text: "–ù–∞—ò–¥–æ–±—Ä–∏ –ø–µ—Ä—Ñ–æ—Ä–º–∞–Ω—Å–∏", value: "A" },
                { text: "–î–∞ –Ω–µ –º–∏ –∫–æ—á–∏ –Ω–∞ —Ä–∞–±–æ—Ç–∞", value: "B" },
                { text: "–ù–∞—ò–¥–æ–±—Ä–∞ –≤—Ä–µ–¥–Ω–æ—Å—Ç –∑–∞ –ø–∞—Ä–∏—Ç–µ", value: "C" }
            ]
        },
        {
            id: "Q3",
            text: "–ö–∞–∫–æ–≤ –µ–∫—Ä–∞–Ω —Ç–∏ –æ–¥–≥–æ–≤–∞—Ä–∞?",
            options: [
                { text: "–ì–æ–ª–µ–º (16 inch)", value: "A" },
                { text: "–°—Ç–∞–Ω–¥–∞—Ä–¥–µ–Ω —Ä–∞–±–æ—Ç–µ–Ω –µ–∫—Ä–∞–Ω (15 inch)", value: "B" },
                { text: "–ö–æ–º–ø–∞–∫—Ç–µ–Ω –∏ –ª–µ—Å–µ–Ω –∑–∞ –Ω–æ—Å–µ—ö–µ (14 inch)", value: "C" }
            ]
        },
        {
            id: "Q4",
            text: "–ö–∞–∫–æ –∏–∑–≥–ª–µ–¥–∞ —Ç–≤–æ—ò–æ—Ç —Ç–∏–ø–∏—á–µ–Ω –¥–µ–Ω?",
            options: [
                { text: "–î–æ–ª–≥–∏ —Ñ–æ–∫—É—Å–∏—Ä–∞–Ω–∏ —Å–µ—Å–∏–∏, –≥–µ—ò–º–∏–Ω–≥ –∏–ª–∏ –Ω–∞ —Ä–∞–±–æ—Ç–∞", value: "A" },
                { text: "–°–æ—Å—Ç–∞–Ω–æ—Ü–∏, —Ç–∞–±–µ–ª–∏, –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏", value: "B" },
                { text: "–ú–Ω–æ–≥—É –¥–≤–∏–∂–µ—ö–µ, —Ä–∞–±–æ—Ç–∞ –æ–¥ –∫–∞—Ñ—É–ª–∏—ö–∞, coworking, —Ç–µ—Ä–µ–Ω", value: "C" }
            ]
        },
        {
            id: "Q6", 
            text: "–ö–∞–¥–µ –Ω–∞—ò–º–Ω–æ–≥—É —ú–µ –≥–æ –∫–æ—Ä–∏—Å—Ç–∏—à –ª–∞–ø—Ç–æ–ø–æ—Ç?",
            options: [
                { text: "–î–æ–º–∞ –∏–ª–∏ –±–∏—Ä–æ", value: "A" },
                { text: "–ö–∞–Ω—Ü–µ–ª–∞—Ä–∏—ò–∞ –∏ —Å–æ—Å—Ç–∞–Ω–æ—Ü–∏ —Å–æ –∫–ª–∏–µ–Ω—Ç–∏", value: "B" },
                { text: "–†–∞–∑–ª–∏—á–Ω–∏ –ª–æ–∫–∞—Ü–∏–∏, —Å–µ–∫–æ–≥–∞—à —Å–æ –º–µ–Ω–µ –≤–æ —Ä–∞–Ω–µ—Ü", value: "C" }
            ]
        },
        {
            id: "Q7",
            text: "–®—Ç–æ —Ç–∏ –∑–≤—É—á–∏ –∏–¥–µ–∞–ª–Ω–æ –∑–∞ —Ç–µ–±–µ?",
            options: [
                { text: "–°–∞–∫–∞–º –ª–∞–ø—Ç–æ–ø —à—Ç–æ –µ —Å–∫–∞–ø –Ω–æ –º–æ—ú–µ–Ω", value: "A" },
                { text: "–°–∞–∫–∞–º –ª–∞–ø—Ç–æ–ø —à—Ç–æ –µ –ª–µ—Å–µ–Ω", value: "B" },
                { text: "–°–∞–∫–∞–º –Ω–µ—à—Ç–æ –ø—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª–Ω–æ", value: "C" },
                { text: "–°–∞–∫–∞–º –ª–∞–ø—Ç–æ–ø —Å–æ –ø–æ–Ω–∏—Å–∫–∞ —Ü–µ–Ω–∞", value: "D" }
            ]
        }
    ];

    const products = {
        legion: {
            slug: "outcome_legion",
            persona: "gamer",
            url: "https://kupilenovo.mk/categories/_laptops/83F500DJRM-Legion-Legion-Pro-7-16IAX10H-Eclipse-Black---Ultra-9-275HX,-64GB,-2TB-NVMe,-RTX-5080-16GB,-16-,-DOS"
        },
        thinkbook14: {
            slug: "outcome_thinkbook14",
            persona: "work_mobile",
            url: "https://kupilenovo.mk/categories/_laptops/21MR004HRM-Lenovo-ThinkBook-14-G7-IML-Arctic-Grey----Ultra-7-155H,-32GB,-512GB-SSD,-14-,-DOS"
        },
        thinkpadE16: {
            slug: "outcome_thinkpadE16",
            persona: "work_premium",
            url: "https://kupilenovo.mk/categories/_laptops/21SR004GRI-Lenovo-ThinkPad-E16-Gen-3-Black---Ultra-7-255H,-16GB,-1TB,-16-,-DOS"
        },
        v15: {
            slug: "outcome_v15",
            persona: "work_best_value",
            url: "https://kupilenovo.mk/categories/_laptops/21MS004TRM--Lenovo-ThinkBook-16-G7-IML-Arctic-Grey---Ultra-5-125U,-16GB,-1TB-NVMe,-16-,-DOS"
        },
        fallback: {
            slug: "fallback_price",
            persona: "price_hunter",
            url: "https://kupilenovo.mk/_laptops.nspx?priceRange=9750_31137"
        }
    };

    let currentStep = 0;
    let answers = {};
    let scores = { legion: 0, thinkbook14: 0, thinkpadE16: 0, v15: 0 };

    const screens = {
        welcome: document.getElementById('screen-welcome'),
        questions: document.getElementById('screen-questions'),
        loading: document.getElementById('screen-loading'),
        locked: document.getElementById('screen-locked'),
        form: document.getElementById('screen-form')
    };
    const progressHeader = document.getElementById('progress-header');
    const progressBar = document.getElementById('progress-bar');
    const progressText = document.getElementById('progress-text');
    const progressPercent = document.getElementById('progress-percent');
    const backBtn = document.getElementById('back-btn');

    function showScreen(name) {
        Object.values(screens).forEach(el => {
            el.classList.remove('active');
            el.style.display = 'none';
        });
        screens[name].style.display = 'flex';
        requestAnimationFrame(() => screens[name].classList.add('active'));
    }

    function startQuiz() {
        showScreen('questions');
        progressHeader.style.display = 'block';
        renderQuestion();
    }

    function renderQuestion() {
        const q = questions[currentStep];
        const pct = Math.round(((currentStep + 1) / questions.length) * 100);
        progressBar.style.width = `${pct}%`;
        progressText.innerText = `–ü–†–ê–®–ê–ä–ï ${currentStep + 1} –û–î ${questions.length}`;
        progressPercent.innerText = `${pct}%`;

        document.getElementById('q-text').innerText = q.text;

        if (currentStep === 0) {
            backBtn.classList.add('disabled');
        } else {
            backBtn.classList.remove('disabled');
        }

        const container = document.getElementById('a-container');
        container.innerHTML = '';
        
        q.options.forEach(opt => {
            const div = document.createElement('div');
            div.className = 'option-card';
            div.onclick = () => selectOption(div, q.id, opt.value);
            div.innerHTML = `
                <div class="radio-circle"></div>
                <div class="option-text">${opt.text}</div>
            `;
            if (answers[q.id] === opt.value) {
                div.classList.add('selected');
            }
            container.appendChild(div);
        });
    }

    function selectOption(el, qId, val) {
        const siblings = el.parentElement.children;
        for (let sib of siblings) sib.classList.remove('selected');
        el.classList.add('selected');

        answers[qId] = val;

        if (currentStep < questions.length - 1) {
            currentStep++;
            renderQuestion();
        } else {
            finishQuiz();
        }
    }

    function goBack() {
        if (currentStep === 0) return;
        currentStep--;
        renderQuestion();
    }

    function calculateScores() {
        scores = { legion: 0, thinkbook14: 0, thinkpadE16: 0, v15: 0 };

        if (answers['Q1'] === 'A') scores.legion += 5;
        if (answers['Q1'] === 'B') { scores.thinkpadE16 += 3; scores.v15 += 3; }

        if (answers['Q2'] === 'A') { scores.legion += 2; scores.thinkpadE16 += 1; }
        if (answers['Q2'] === 'B') { scores.thinkpadE16 += 2; scores.thinkbook14 += 1; }
        if (answers['Q2'] === 'C') { scores.v15 += 3; }

        if (answers['Q3'] === 'A') { scores.legion += 1; scores.thinkpadE16 += 1; scores.v15 += 1; }
        if (answers['Q3'] === 'B') { scores.thinkpadE16 += 1; scores.v15 += 1; }
        if (answers['Q3'] === 'C') { scores.thinkbook14 += 2; }

        if (answers['Q4'] === 'A') { scores.legion += 1; scores.thinkpadE16 += 1; }
        if (answers['Q4'] === 'B') { scores.thinkpadE16 += 2; scores.v15 += 1; }
        if (answers['Q4'] === 'C') { scores.thinkbook14 += 2; }

        if (answers['Q6'] === 'A') { scores.legion += 1; }
        if (answers['Q6'] === 'B') { scores.thinkpadE16 += 1; scores.v15 += 1; }
        if (answers['Q6'] === 'C') { scores.thinkbook14 += 2; }

        if (answers['Q7'] === 'A') { scores.legion += 1; scores.thinkpadE16 += 1; }
        if (answers['Q7'] === 'B') { scores.thinkbook14 += 1; }
        if (answers['Q7'] === 'C') { scores.thinkpadE16 += 1; }
        if (answers['Q7'] === 'D') { scores.v15 += 1; }

        return determineWinner();
    }

    function determineWinner() {
        let maxScore = -1;
        let candidates = [];
        
        for (const [key, val] of Object.entries(scores)) {
            if (val > maxScore) {
                maxScore = val;
                candidates = [key];
            } else if (val === maxScore) {
                candidates.push(key);
            }
        }

        if (candidates.length === 1) {
            if (answers['Q7'] === 'D' && candidates[0] !== 'legion' && candidates[0] !== 'v15') {
                if (maxScore - scores.v15 <= 2) return 'v15';
            }
            return candidates[0];
        }

        if (candidates.includes('legion')) return 'legion';
        if (candidates.includes('thinkpadE16') && candidates.includes('v15')) return 'thinkpadE16';

        if (candidates.includes('thinkbook14')) {
            let mobility = 0;
            if (answers['Q4'] === 'C') mobility++;
            if (answers['Q6'] === 'C') mobility++;
            if (answers['Q2'] === 'B') mobility++;
            if (mobility >= 2) return 'thinkbook14';
            const other = candidates.find(c => c !== 'thinkbook14');
            if (other) return other;
        }

        if (answers['Q7'] === 'D' && candidates.includes('v15')) return 'v15';

        return candidates[0];
    }

    function finishQuiz() {
        progressHeader.style.display = 'none';
        showScreen('loading');

        const msgs = [
            "–ì–∏ —Å–ø–æ—Ä–µ–¥—É–≤–∞–º–µ —Ç–≤–æ–∏—Ç–µ –æ–¥–≥–æ–≤–æ—Ä–∏‚Ä¶",
            "–ì–∏ —Ñ–∏–ª—Ç—Ä–∏—Ä–∞–º–µ –º–æ–¥–µ–ª–∏—Ç–µ‚Ä¶",
            "–ì–æ –ø–æ–¥–≥–æ—Ç–≤—É–≤–∞–º–µ —Ç–≤–æ—ò–æ—Ç –∏–¥–µ–∞–ª–µ–Ω Lenovo‚Ä¶"
        ];
        const loadText = document.getElementById('loading-text');
        const loadBar = document.getElementById('loading-bar');
        
        let step = 0;
        loadBar.style.width = "10%";

        const interval = setInterval(() => {
            step++;
            if (step === 1) {
                loadText.innerText = msgs[1];
                loadBar.style.width = "40%";
            } else if (step === 2) {
                loadText.innerText = msgs[2];
                loadBar.style.width = "80%";
            } else if (step === 3) {
                loadBar.style.width = "100%";
                clearInterval(interval);
                setTimeout(() => showScreen('locked'), 2500);
            }
        }, 700);
    }

    function goToForm() {
        showScreen('form');
    }

    function buildUTM(winnerKey) {
        const data = products[winnerKey] || products.fallback;
        const params = new URLSearchParams();
        params.set('utm_source', 'quiz');
        params.set('utm_medium', 'paid');
        params.set('utm_campaign', 'quiz');
        params.set('utm_content', data.slug);
        params.set('utm_term', `persona_${data.persona}`);
        return params.toString();
    }

    function submitForm(e) {
        e.preventDefault();
        const btn = document.getElementById('submit-btn');
        btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> –°–µ –æ—Ç–∫–ª—É—á—É–≤–∞...';
        btn.disabled = true;

        const winner = calculateScores();
        const productData = products[winner];

        const payload = new FormData();
        payload.append('fullname', document.getElementById('fullname').value);
        payload.append('email', document.getElementById('email').value);
        payload.append('phone', document.getElementById('phone').value);
        payload.append('winner', winner);
        payload.append('persona', productData.persona);
        payload.append('answers', JSON.stringify(answers));
        
        fetch(GOOGLE_SCRIPT_URL, { method: 'POST', body: payload, mode: 'no-cors' })
            .catch(console.error);

        setTimeout(() => {
            const finalUrl = `${productData.url}${productData.url.includes('?') ? '&' : '?'}${buildUTM(winner)}`;
            btn.innerHTML = '<i class="fas fa-check"></i> –£—Å–ø–µ—à–Ω–æ!';
            btn.style.background = '#2ecc71';
            window.location.href = finalUrl;
        }, 1200);
    }
</script>
</body>
</html>
